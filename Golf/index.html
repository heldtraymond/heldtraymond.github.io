<html>
<head>
	<title>Golf</title>
	<!--meta name="viewport" content="width=device-width,initial-scale=1.0"-->
	<meta charset="UTF-8">
	<link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@800&display=swap" rel="stylesheet">
	<style>
		body {
			text-align:center;
			font-family:'Tahoma', Verdana, sans-serif;
		}
		.widthTest {
			font-family:'Roboto Slab', Tahoma, sans-serif;
			font-size:50pt;
			opacity:0;
			position:absolute;
			left:0px;
			top:0px;
			z-index:-2;
		}
		#playTableContainer {
			width:100%;
			display:inline-block;
			/*padding-left:30px;
			padding-right:30px;*/
		}
		#playTable {
			width:100%;
			border-collapse:collapse;
		}
		.dealerLabel {
			display:none;
			font-weight:bold;
			position:relative;
			margin-bottom:-1.5em;
			margin-top:0px;
			height:1.5em;
			z-index:104;
		}
		.dealerLabel span {
			color:white;
			border:5px solid blue;
			border-radius:5px;
			background-color:blue;
		}
		/*#playTable tr, #playTable td {
			border:none;
		}*/
		.infoOnly {
			width:11%;
		}
		.playerCards {
			width:13%;
			padding-left:10px;
			padding-right:10px;
		}
		#centerCell .card {
			width:1.4em;
		}
		#centerCell {
			font-size:12pt;
		}
		.card {
			font-family:'Roboto Slab', Tahoma, sans-serif;
			border:2px solid black;
			border-radius:6px;
			background-color:white;
			font-size:24pt;
			font-weight:bolder;
			width:33%;
			text-align:center;
			line-height:87%;
			letter-spacing:-3;
			padding-right:3px;
			padding-top:0px;
			padding-bottom:5px;
			height:2.2em;
		}
		#playTable tr td {
			/*padding-bottom:8px;*/
		}
		.red {
			color:red;
		}
		.black {
			color:black;
		}
		.joker {
			color:black;
			letter-spacing:0;
			padding-right:0px;
			line-height:65%;
		}
		.jokerText {
			font-size:8pt;
		}
		.suit {
			width:100%;
			font-size:33pt;
		}
		.facedown {
			background-repeat:no-repeat;
			background-size:contain;
			background-position:center;
		}
		.facedown.deck1 {
			background-image:url('cardBackBicycle.png');
			background-color:#252760;
		}
		.facedown.deck2 {
			background-image:url('cardBackDominos2.png');
			background-color:#000000;
		}
		.playerCell {
			font-style:bold;
		}
		.playerInfo {
			text-align:center;
		}
		.playerInfoWrapper {
			max-width:80px;
		}
		.cellComponent.current {
			background-color:#7777ff;/*#33aa33;*/
		}
		.playerInfo.live img {
			border:6px solid red;
			margin:-6px -6px -6px -6px;
		}
		.playerInfo img {
			background-color:white;
			border-radius:8px;
			border:3px solid black;
			max-height:80px;
			position:relative;
		}
		.playerName {
			margin-top:0px;
			margin-bottom:0px;
    		font-size:12pt;
			position:relative;
			z-index:100;
		}
		.playerName span {
			color:black;
			border-radius:4px;
			background-color:#ccccff;
			border:2px solid #000088;
			padding-left:3px;
			padding-right:3px;
			display:inline-block;
			margin-top:-1.3em;
			margin-bottom:-1.3em;
			min-height:1.3em;
			min-width:1.3em;
		}
    	.playerCards table {
    		width:100%;
    		table-layout:fixed;
    	}
    	.playerCards.live .faceup:hover {
    		cursor:pointer;
    		background-color:#66dd66;
    		/*border-color:green;*/
    	}
    	.playerCards.live .facedown:hover {
    		cursor:pointer;
    		background-color:#66dd66;
    		/*border-color:#ffff88;
    		background-image:none;*/
    	}
    	.playerCards .card:hover {
    		cursor:not-allowed;
    	}
    	.playerInfo.right {
    		text-align:right;
    	}
    	.playerInfo.left {
    		text-align:left;
    	}
    	.playerInfoWrapper br {
			display:none;
    	}
    	#middleRow, #middleRow > td {
    		padding-top:5px;
    		padding-bottom:3px;
    	}
    	#centerCell {
    		text-align:center;
    	}
    	#toggleNamesBox {
    		margin-right:6px;
    	}
    	#toggleScoresBox {
    		margin-left:6px;
    	}
    	#toggleScoresBox, #toggleNamesBox {
    		height:20px;
    		width:20px;
    	}
    	#toggleScoresBox, #toggleNamesBox, .toggleLabel {
    		vertical-align:middle;
    		cursor:pointer;
    	}
    	#toggleScores:hover, #toggleNames:hover {
    		cursor:pointer;
    		background-color:#bbbbff;
    		border:2px solid #000088;
    		border-radius:6px;
    		padding-top:2px;
    		padding-right:4px;
    		padding-left:4px;
    	}
    	#toggleScores, #toggleNames {
    		padding:6px;
    	}
		</style>
	<script src="jquery.js"></script>
</head>
<body style="overflow-y:scroll;text-align:center;">
	<span class="widthTest" id="widthTestValue">A</span>
	<span class="widthTest" id="widthTestSuit">♣</span>
	<img id="bgPhoto" src="LivingRoom6.jpg" style="width:100%;position:absolute;left:0px;top:0px;z-index:-1">
	<div id="playTableContainer">
		<table id="playTable">
			<tr>
				<td class="infoOnly"></td>
				<td></td>
				<td class="playerInfo cellComponent" id="playerInfo0">
				</td>
				<td class="playerInfo cellComponent" id="playerInfo1">
				</td>
				<td class="playerInfo cellComponent" id="playerInfo2">
				</td>
				<td class="playerInfo cellComponent" id="playerInfo3">
				</td>
				<td></td>
				<td class="infoOnly"></td>
			</tr>
			<tr>
				<td class="playerInfo cellComponent right" id="playerInfo13">
				</td>
				<td class="playerCards cellComponent" id="playerCards13">
				</td>
				<td class="playerCards cellComponent" id="playerCards0">
				</td>
				<td class="playerCards cellComponent" id="playerCards1">
				</td>
				<td class="playerCards cellComponent" id="playerCards2">
				</td>
				<td class="playerCards cellComponent" id="playerCards3">
				</td>
				<td class="playerCards cellComponent" id="playerCards4">
				</td>
				<td class="playerInfo cellComponent left" id="playerInfo4">
				</td>
			</tr>
			<tr id="middleRow">
				<td class="playerInfo cellComponent right" id="playerInfo12">
				</td>
				<td class="playerCards cellComponent" id="playerCards12">
				</td>
				<td colspan="4" id="centerCell"></td>
				<td class="playerCards cellComponent" id="playerCards5">
				</td>
				<td class="playerInfo cellComponent left" id="playerInfo5">
				</td>
			</tr>
			<tr>
				<td class="playerInfo cellComponent right" id="playerInfo11">
				</td>
				<td class="playerCards cellComponent" id="playerCards11">
				</td>
				<td class="playerCards cellComponent" id="playerCards10">
				</td>
				<td class="playerCards cellComponent" id="playerCards9">
				</td>
				<td class="playerCards cellComponent" id="playerCards8">
				</td>
				<td class="playerCards cellComponent" id="playerCards7">
				</td>
				<td class="playerCards cellComponent" id="playerCards6">
				</td>
				<td class="playerInfo cellComponent left" id="playerInfo6">
				</td>
			</tr>
			<tr>
				<td class="infoOnly"></td>
				<td></td>
				<td class="playerInfo cellComponent" id="playerInfo10">
				</td>
				<td class="playerInfo cellComponent" id="playerInfo9">
				</td>
				<td class="playerInfo cellComponent" id="playerInfo8">
				</td>
				<td class="playerInfo cellComponent" id="playerInfo7">
				</td>
				<td></td>
				<td class="infoOnly"></td>
			</tr>
		</table>
	</div>
</body>
<script>
	var DECK = [];
	var NAMES = [
		"Samantha",
		"Diane",
		"Tracy",
		"David",
		"Jeff",
		"Lauren",
		"Michael",
		"Elizabeth",
		"Nicholas",
		"Justin",
		"Michelle",
		"Nicole",
		"Angela",
		"Ray",
	];
	var ROUND_NUM = 0;
	var DRAW_INDEX = 0;
	var PLAYERS = [];

	for (var i = 0; i < NAMES.length; i++) {
		if (Math.random() < 0.9) {
			PLAYERS.push({
				name: NAMES[i],
				score: 0,
				isLive: Math.random() < 0.15
			});
		}
	}

	var totalSeats = 14;
	var SEATS = [];
	for (var i = 0; i < totalSeats; i++) {
		SEATS.push(null);
	}

	console.log("Setting seats");

	for (var i = 0; i < PLAYERS.length; i++) {
		var seat = -1;
		while (seat < 0 || SEATS[seat] !== null) {
			seat = Math.floor(Math.random() * 14);
		}

		SEATS[seat] = PLAYERS[i];
	}

	console.log("Done with seats");

	var currentSeat = Math.floor(Math.random() * totalSeats);
	IncrementCurrent(false);
	var dealer = currentSeat;
	IncrementCurrent(false);
	console.log(currentSeat);

	var SUITS = ["♥", "♠", "♦", "♣"];
	var VALS = [
		"A",
		"2",
		"3",
		"4",
		"5",
		"6",
		"7",
		"8",
		"9",
		"10",
		"J",
		"Q",
		"K",
	];

	var lastResize = new Date();
	var windowSize = window.innerWidth;
	$(window).resize(SafeFitToWindow);
	Setup();

	for (var i = 0; i < totalSeats; i++) {
		if (SEATS[i] === null) {
			$("#playerInfo" + i + " img").hide();
			$("#playerInfo" + i + " .playerName").hide();
			$("#playerCards" + i + " table").hide();
		}
		else {
			if (SEATS[i].isLive) {
				$("#playerInfo" + i).addClass("live");
				$("#playerCards" + i).addClass("live");
			}
			//if (SEATS[i].name === "Angela" || SEATS[i].name === "Ray") {
			//	$("#playerInfo" + i + " img").attr("src", "players/" + SEATS[i].name + ".jpg");
			//}
			//else {
				$("#playerInfo" + i + " img").attr("src", "User.png");
			//}
		}
	}

	var showScores = (Math.random() > 0.5);	
	var showNames = (Math.random() > 0.5);	
	if (showScores || showNames) {
		$(".playerName").css("opacity", "0");
	}
	else {
		$(".playerName").hide();
	}

	$(".playerInfo, .playerName").css("opacity", "0");
	$(".playerCards .card").css("opacity", "0");
	$("#centerCell>span").hide();
	FitToWindow(true);
	ShuffleUpAndDeal();
	console.log("Here");
	setTimeout(function() {
		$(".playerInfo").css("opacity", "1");
	setTimeout(function() {
		$("#playerInfo" + dealer + " img").css("border", "10px solid blue").css("margin", "-7px -7px -7px -7px");
		$("#playerInfo" + dealer + " .dealerLabel").show();
	setTimeout(function() {
		$(".playerInfoWrapper img").css("border", "").css("margin", "");
	setTimeout(function() {
		$("#playerInfo" + dealer + " img").css("border", "10px solid blue").css("margin", "-7px -7px -7px -7px");
	setTimeout(function() {
		$(".playerInfoWrapper img").css("border", "").css("margin", "");
	setTimeout(function() {
		$("#playerInfo" + dealer + " img").css("border", "10px solid blue").css("margin", "-7px -7px -7px -7px");
	setTimeout(function() {
		$(".playerInfoWrapper img").css("border", "").css("margin", "");
	setTimeout(function() {
		$("#playerInfo" + dealer + " img").css("border", "10px solid blue").css("margin", "-7px -7px -7px -7px");
	setTimeout(function() {
		$(".playerInfoWrapper img, .dealerLabel").animate({
	    	left:'0px',
	    	top:'0px',
		}, 1500);
		setTimeout(function() {
			ShowHideNames();

			var delayTime = 0;
			var totalCards = 0;
			for (var q = 0; q < 6; q++) {
				for (var p = 0; p < SEATS.length; p++) {
					if (SEATS[p] === null) {
						continue;
					}

					var delay = (totalCards <= 3 ? 400 : (totalCards < PLAYERS.length ? 60 : 30));
					delayTime += delay;
					totalCards++;
					//console.log(currentSeat);
					//console.log(currentSeat + "x" + q + " - " + totalCards);
					DealCard($("#playerCards" + currentSeat + " .card").eq(q), delayTime);

					if (totalCards < (6 * PLAYERS.length)) {
						IncrementCurrent(false);
					}
				}
			}

			setTimeout(function() {
				$(".playerName").css("opacity", "1");
				$(".playerInfoWrapper img").css("border", "").css("margin", "");
				$("#playerInfo" + dealer + " .dealerLabel").hide();
				$("#centerCell>span").show();
				AdvanceToNextPlayer();
			}, delayTime + 1000);
  		}, 1500);
	}, 700);
	}, 100);
	}, 100);
	}, 100);
	}, 100);
	}, 100);
	}, 100);
	}, 700);
	}, 700);

	function AdvanceToNextPlayer() {
		IncrementCurrent(true);
		console.log(currentSeat + " " + DRAW_INDEX);

		if (!SEATS[currentSeat].isLive) {
			setTimeout(OpponentMove, 500 + Math.floor(Math.random() * 2000));
		}
	}

	function OpponentMove() {
		var cards = GetPlayerCards(currentSeat);
		var facedownIndices = [];
		for (var i = 0; i < 6; i++) {
			if (cards[i] < 0) {
				facedownIndices.push(i);
			}
		}

		var randNum = Math.random();

		if (facedownIndices.length > 0 && randNum < 0.5) {
			// Flip over card
			FlipOverCard(currentSeat, facedownIndices[Math.floor(Math.random() * facedownIndices.length)]);
		}
		else if (randNum < 0.75) {
			OpponentDrawCard();
		}
		else {
			OpponentTakeDiscard(Math.floor(Math.random() * 6));
		}
	}

	function OpponentDrawCard() {
		FlipDrawCard(false);
	}

	function OpponentUseDrawCard() {
		var swapWith = Math.floor(Math.random() * 7);
		PlayDrawCard(swapWith);
	}

	function PlayDrawCard(pCardIndex) {
		DRAW_INDEX++;
		if (pCardIndex > 5) {
			var centerCards = $("#centerCell .card");
			$.when(centerCards.fadeOut(200)).then(function() {
				$("#centerCell .card").eq(0).css("opacity", 1);
				RenderCard(centerCards.eq(0), DECK[DRAW_INDEX]);
				RenderCard(centerCards.eq(1), -1);
				$.when(centerCards.fadeIn(200)).then(function() {
					AdvanceToNextPlayer();
				});
			});
		}
		else {
			var oldPlayerCardIndex = GetPlayerIndex(currentSeat) * 6 + pCardIndex;
			var oldPlayerCardVal = DECK[oldPlayerCardIndex];
			DECK[oldPlayerCardIndex] = DECK[DRAW_INDEX];
			DECK[DRAW_INDEX] = Math.abs(oldPlayerCardVal);

			var swapCards = $("#playerCards" + currentSeat + " .card").eq(pCardIndex).add($("#centerCell .card").eq(1));
			$.when(swapCards.fadeOut(200)).then(function() {
				$("#playerCards" + currentSeat + " .card").eq(pCardIndex).css("background-color", "white");
				RenderCard($("#playerCards" + currentSeat + " .card").eq(pCardIndex), DECK[oldPlayerCardIndex]);
				RenderCard($("#centerCell .card").eq(1), -1);
				$.when(swapCards.fadeIn(200)).then(function() {
					AdvanceToNextPlayer();
					setTimeout(function() {
						$("#playerCards" + currentSeat + " .card").eq(pCardIndex).css("background-color", "");
					}, 2000);
				});
			});
			var discard = $("#centerCell .card").eq(0);
			$.when(discard.fadeOut(200)).then(function() {
				discard.css("opacity", 1);
				RenderCard(discard, DECK[DRAW_INDEX]);
				discard.fadeIn(200);
			});
		}
	}

	function OpponentTakeDiscard(pCardIndex) {
		TakeDiscard(pCardIndex);
	}

	function TakeDiscard(pCardIndex) {
		var oldPlayerCardIndex = GetPlayerIndex(currentSeat) * 6 + pCardIndex;
		var oldPlayerCardVal = DECK[oldPlayerCardIndex];
		DECK[oldPlayerCardIndex] = DECK[DRAW_INDEX];
		DECK[DRAW_INDEX] = Math.abs(oldPlayerCardVal);

		var swapCards = $("#playerCards" + currentSeat + " .card").eq(pCardIndex).add($("#centerCell .card").eq(0));
		$.when(swapCards.fadeOut(200)).then(function() {
			$("#playerCards" + currentSeat + " .card").eq(pCardIndex).css("background-color", "white");
			RenderCard($("#playerCards" + currentSeat + " .card").eq(pCardIndex), DECK[oldPlayerCardIndex]);
			RenderCard($("#centerCell .card").eq(0), DECK[DRAW_INDEX]);
			$.when(swapCards.fadeIn(200)).then(function() {
				AdvanceToNextPlayer();
				setTimeout(function() {
					swapCards.eq(0).css("background-color", "");
				}, 2000);
			});
		});
	}

	function FlipDrawCard(pIsLivePlayer) {
		var drawCard = $("#centerCell .card").eq(1);
		var deckIndex = DRAW_INDEX + 1;
		var value = -DECK[deckIndex];
		DECK[deckIndex] = value;
		$.when(drawCard.fadeOut(200)).then(function() {
			drawCard.css("background-color", "white");
			RenderCard(drawCard, value);
			$.when(drawCard.fadeIn(200)).then(function() {
				if (!pIsLivePlayer) {
					setTimeout(OpponentUseDrawCard, 1500 + Math.floor(Math.random() * 2000));
				}
				$("#centerCell .card").eq(0).css("opacity", 0.15);
				setTimeout(function() {
					drawCard.css("background-color", "");
				}, 2000);
			});
		});
	}

	function GetPlayerCards(pSeatNum) {
		var deckIndexStart = 6 * GetPlayerIndex(pSeatNum);
		var cards = [];
		for (var i = 0; i < 6; i++) {
			cards.push(DECK[deckIndexStart + i]);
		}

		return cards;
	}

	function DealCard(card, delayTime) {
		setTimeout(function() {
			card.css("opacity", "1");
		}, delayTime);
	}

	function Setup() {
		$(".playerInfo").each(function() {
			var span = $("<span></span>");
			span.addClass("playerInfoWrapper");
			var name = $("<p><span></span></p>");
			name.addClass("playerName");
			var img = $("<img>");
			img.attr("src", "User.png");
			var dealer = $("<p><span>DEALER</span></p>");
			dealer.addClass("dealerLabel");
			var id = parseInt($(this).attr("id").substring(10));
			if (id >= 40 && id <= 3) {
				span.append(name);
				span.append(img);
				span.append(dealer);
			}
			else {
				span.append(img);
				span.append(dealer);
				span.append(name);
			}
			$(this).append(span);
		});
		$(".playerCards").each(function() {
			var id = parseInt($(this).attr("id").substring(11));
			var table = $("<table></table>");
			for (var r = 0; r < 2; r++) {
				var tr = $("<tr></tr>");
				for (var c = 0; c < 3; c++) {
					var td = $("<td></td>");
					td.addClass("card");
					//if (id === livePlayer) {
						td.attr("onclick", "ClickedCard(this," + id + "," + (r * 3 + c) + ")");
					//}
					tr.append(td);
				}
				table.append(tr);
			}
			$(this).append(table);
		});
		var span = $("<span style='display:inline-block;text-align:center;'><span id='roundNum'></span></span>");
		var innerSpan = $("<span></span>");
		var table = $("<table align='center'></table>");
		var tr = $("<tr></tr>");
		table.append(tr);
		for (var c = 0; c < 3; c++) {
			var td = $("<td></td>");
			if (c !== 1) {
				td.addClass("card");
			}
			tr.append(td);
		}
		innerSpan.append(table);
		span.append(innerSpan);
		span.append("<span id='toggleNames'><label class='toggleLabel' for='toggleNamesBox'>Show names</label><input type='checkbox' id='toggleNamesBox' onclick='ToggleNames()' /></span>");
		span.append("<span id='toggleScores'><input type='checkbox' id='toggleScoresBox' onclick='ToggleScores()' /><label class='toggleLabel' for='toggleScoresBox'>Show scores</label></span>");
		$("#centerCell").append(span);

		$("#playerInfo11, #playerInfo12, #playerInfo13").find("img, .dealerLabel").css("left", "125px").css("top", "11px");
		$("#playerInfo4, #playerInfo5, #playerInfo6").find("img, .dealerLabel").css("left", "-123px").css("top", "11px");
		$("#playerInfo0, #playerInfo1, #playerInfo2, #playerInfo3").find("img, .dealerLabel").css("top", "100px");
		$("#playerInfo7, #playerInfo8, #playerInfo9, #playerInfo10").find("img, .dealerLabel").css("top", "-80px");
	}

	function ToggleNames() {
		showNames = !showNames;
		ShowHideNames();
	}

	function ToggleScores() {
		showScores = !showScores;
		ShowHideNames();
	}

	function ShowHideNames() {
		$(".playerName").toggle(showScores || showNames);

		for (var i = 0; i < SEATS.length; i++) {
			var label = $("#playerInfo" + i).find(".playerName span");
			if (SEATS[i] === null) {
				label.hide();
			}
			else {
				label.html((showNames ? SEATS[i].name : "") + (showScores ? " <strong>" + SEATS[i].score + "</strong>" : ""));
			}
		}
	}

	function ShuffleUpAndDeal() {
		ROUND_NUM++;
		$("#toggleScoresBox").prop("checked", showScores);
		$("#toggleNamesBox").prop("checked", showNames);
		$("#roundNum").html("Round " + ROUND_NUM + " of 9");
		for (var i = 0; i < 108; i++) {
			DECK[i] = -(i + 1);
		}

		for (var i = 0; i < 108; i++) {
			var randInt = i + Math.floor(Math.random() * (108-i));
			var temp = DECK[i];
			DECK[i] = DECK[randInt];
			DECK[randInt] = temp;
		}

		var prevPlayers = 0;
		for (var i = 0; i < SEATS.length; i++) {
			if (SEATS[i] === null) {
				continue;
			}

			var info = $("#playerInfo" + i);
			info.removeClass("current");
			var cards = $("#playerCards" + i);

			for (var c = 6 * prevPlayers; c < 6 * prevPlayers + 6; c++) {
				var td = cards.find("td").eq(c % 6);
				RenderCard(td, DECK[c]);
			}

			prevPlayers++;
		}

		DRAW_INDEX = (6 * PLAYERS.length) + 1;
		DECK[DRAW_INDEX] = -DECK[DRAW_INDEX];

		var totalDealt = PLAYERS.length * 6;
		for (var i = 0; i < 2; i++) {
			RenderCard($("#centerCell .card").eq(i), DECK[DRAW_INDEX + i]);
		}
	}

	function RenderCard(td, value) {
		td.removeClass("red").removeClass("black").removeClass("facedown").removeClass("faceup").removeClass("joker");
		var isFaceDown = (value < 0);
		value = Math.abs(value);

		if (isFaceDown) {
			td.addClass("facedown").addClass(value <= 54 ? "deck1" : "deck2");
			td.html("");
		}
		else {
			td.addClass("faceup");
			var cardVal = (value - 1) % 54;
			if (cardVal > 51) {
				td.addClass("joker");
				td.html("<span class='jokerText'>J<span style='color:red'>O</span>K<span style='color:red'>E</span>R</span><br><span style='color:black'>♠</span><span style='color:red'>♥</span><br><span style='color:red'>♦</span><span style='color:black'>♣</span>");
			}
			else {
				var suit = Math.floor(cardVal / 13);
				td.html(VALS[cardVal % 13] + '<div class="suit">' + SUITS[suit] + '</div>')
				  .addClass(suit % 2 == 1 ? "black" : "red");
			}
		}
	}

	function SafeFitToWindow() {
		FitToWindow(false);
	}

	function FitToWindow(pOnPageLoad) {
		var currWindowSize = window.innerWidth;

		console.log(currWindowSize);
		console.log(windowSize);

		if (currWindowSize === windowSize && pOnPageLoad !== true) {
			return;
		}


		lastResize = new Date();
		var currTime = lastResize; 
		setTimeout(function() {
			if (currTime !== lastResize) {
				return;
			}
			windowSize = window.innerWidth;
			ResizeText();
			var idealMiddle = 0.575;
			var tableHeight = $("#playTable").height();
			var imageHeight = $("#bgPhoto").height();
			var windowHeight = window.innerHeight;
			var percentHeight = (tableHeight / imageHeight);
			var marginTopPercent = idealMiddle - (percentHeight / 2);
			var marginTopPixels = marginTopPercent * imageHeight;

			if (tableHeight > imageHeight) {
				marginTopPixels = -($("#playTableContainer").position().top);
			}
			else if (marginTopPixels + tableHeight > imageHeight) {
				marginTopPixels = imageHeight - tableHeight - ($("#playTableContainer").position().top) - 2;
			}

			/*console.log(idealMiddle);
			console.log(tableHeight);
			console.log(imageHeight);
			console.log(windowHeight);
			console.log(percentHeight);
			console.log(marginTopPercent);
			console.log(marginTopPixels);*/
			$("#playTableContainer").css("margin-top", marginTopPixels + "px");

			var scrollTo = marginTopPixels + tableHeight - windowHeight + 10;

			if (windowHeight > tableHeight) {
				scrollTo += ((windowHeight - tableHeight) / 2);
			} else if (tableHeight > imageHeight) {
				scrollTo = (tableHeight - windowHeight) / 2;
			}

            if (pOnPageLoad == true) {
	            $('body').animate({
	                scrollTop: scrollTo
		        }, 1500);
            }
            else {
                window.scroll(0, scrollTo);
	            /*var ua = window.navigator.userAgent.toLowerCase();
	            if (ua.indexOf("trident") >= 0 || ua.indexOf("edge") >= 0) {
	                // IE and Edge don't support smooth animated scrolling - just set the scroll
	                window.scroll(0, scrollTo);
	            }
	            else {
	                window.scroll({ top: scrollTo, behavior: 'smooth' });
	            }*/
            }

		}, 100);
	}

	function ClickedCard(pCardEl, pSeatNum, pCardNum) {
		if (!SEATS[currentSeat].isLive || pSeatNum !== currentSeat) {
			return;
		}

		FlipOverCard(pSeatNum, pCardNum);
	}

	function GetPlayerIndex(pSeatNum) {
		var playerNum = -1;
		for (var s = 0; s <= pSeatNum; s++) {
			if (SEATS[s] !== null) {
				playerNum++;
			}
		}

		return playerNum;
	}

	function FlipOverCard(pSeatNum, pCardNum) {
		var cards = $("#playerCards" + pSeatNum);
		var card = cards.find(".card").eq(pCardNum);
		var deckIndex = 6 * GetPlayerIndex(pSeatNum) + pCardNum;
		var value = -DECK[deckIndex];
		DECK[deckIndex] = value;
		card.fadeOut(200, function() {
			card.css("background-color", "white");
			RenderCard(card, value);
		});
		card.fadeIn(200, function() {
			AdvanceToNextPlayer();
		});
		setTimeout(function() {
			card.css("background-color", "");
		}, 2000);
	}

	function IncrementCurrent(pHighlight = false) {
		//console.log("Incrementing");
		var started = true;
		while (started === true || SEATS[currentSeat] === null) {
			started = false;
			currentSeat += 1;
			currentSeat %= 14;
		}
		//console.log("Done Incrementing");

		$(".current").removeClass("current");

		if (pHighlight) {
			$("#playerInfo" + currentSeat).addClass("current");
			$("#playerCards" + currentSeat).addClass("current");
		}
	}

	function ResizeText() {
		var idealWidth = 1270;
		var actualWidth = window.innerWidth;
		var scale = (actualWidth / idealWidth);

		var photoHeight = scale * 80;
		if (photoHeight > 100) {
			photoHeight = 100;
		}
		if (photoHeight < 50) {
			photoHeight = 50;
		}

		$(".playerInfo img").css("max-height", photoHeight + "px");

		// Compensate for line thickness
		if (scale > 1) {
			scale *= 1.02;
		}
		else {
			scale /= 1.02;
		}

		var suitScale = $("#widthTestValue").width() / $("#widthTestSuit").width() * 1.25;

		// Card 24 pt
		// Suit (24 * scale) pt since different browsers render them different sizes
		// Joker 8 pt
		// Name 12 pt

		$(".card").css("font-size", (scale * 24) + "pt").css("padding-bottom", (scale * 5) + "px");
		$(".jokerText").css("font-size", (scale * 8) + "pt");
		$(".suit").css("font-size", (scale * suitScale * 24) + "pt");
		$(".joker>span").not(".jokerText").css("font-size", (scale * suitScale * 12) + "pt");
		$(".playerName, #centerCell").css("font-size", (scale * 12 < 10 ? 10 : scale * 12) + "pt");
	}
</script>

</html>